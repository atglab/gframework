{
    "type": "Ext.app.ViewController",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "useranalysisedit",
        "designer|userClassName": "analyzer.user.UserAnalysisEditViewController"
    },
    "name": "analyzer.badge.BadgeAnalysisEditViewController1",
    "designerId": "5afbbc08-50c2-4ad1-90c1-5e60e4aec4b4",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getStatisticsAllUsers",
                "implHandler": [
                    "var me = this;",
                    "",
                    "var key = Ext.getStore('ManagerInfo').data.items[0].get('key');",
                    "var token = Ext.getStore('ManagerInfo').data.items[0].get('token');",
                    "",
                    "Ext.Ajax.request({",
                    "    url: '/api/v1/analyzer/users',",
                    "    method: 'GET',",
                    "    headers: {",
                    "        'x-key': key,",
                    "        'x-access-token': token",
                    "    },",
                    "    success: function(response){",
                    "        var decodeResponse \t\t= Ext.decode(response.responseText);",
                    "",
                    "        var userGenderTotal\t= me.getStore('userGenderTotal');",
                    "        var userAgeTotal \t= me.getStore('userAgeTotal');",
                    "",
                    "        userGenderTotal.loadData(decodeResponse.data.gender, false);",
                    "        userAgeTotal.loadData(decodeResponse.data.age, false);",
                    "",
                    "    },",
                    "    failure: function(response){console.log(response);}",
                    "});"
                ]
            },
            "name": "getStatisticsAllUsers",
            "designerId": "a5244fae-9d34-4c65-ab31-8215ab9c6a82"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "userId"
                ],
                "fn": "getStatisticsUser",
                "implHandler": [
                    "var me = this;",
                    "",
                    "var key = Ext.getStore('ManagerInfo').data.items[0].get('key');",
                    "var token = Ext.getStore('ManagerInfo').data.items[0].get('token');",
                    "",
                    "Ext.Ajax.request({",
                    "    url: '/api/v1/analyzer/users/'+userId,",
                    "    method: 'GET',",
                    "    headers: {",
                    "        'x-key': key,",
                    "        'x-access-token': token",
                    "    },",
                    "    success: function(response){",
                    "",
                    "        var decodeResponse \t\t= Ext.decode(response.responseText);",
                    "",
                    "        var userId\t\t\t\t= me.lookupReference('userId');",
                    "        var userName\t\t\t= me.lookupReference('userName');",
                    "        var userNick\t\t\t= me.lookupReference('userNick');",
                    "        var userGender\t\t\t= me.lookupReference('userGender');",
                    "        var userAge\t\t\t\t= me.lookupReference('userAge');",
                    "        var userImg\t\t\t\t= me.lookupReference('userImg');",
                    "",
                    "",
                    "        userId.setValue(decodeResponse.data.basic.id);",
                    "        userName.setValue(decodeResponse.data.basic.name);",
                    "        userNick.setValue(decodeResponse.data.basic.nickname);",
                    "        userGender.setValue(decodeResponse.data.basic.gender);",
                    "        userAge.setValue(decodeResponse.data.basic.age);",
                    "        userImg.setSrc(decodeResponse.data.basic.profile);",
                    "",
                    "",
                    "",
                    "        var badgesStore \t\t= me.getStore('badges');",
                    "        var pointsStore \t\t= me.getStore('points');",
                    "        var levelsStore \t\t= me.getStore('levels');",
                    "        var statusesStore \t\t= me.getStore('statuses');",
                    "        var permissionsStore\t= me.getStore('permissions');",
                    "        var missionsStore\t\t= me.getStore('missions');",
                    "        var activityLogsStore\t= me.getStore('activityLogs');",
                    "        var rewardLogsStore\t\t= me.getStore('rewardLogs');",
                    "",
                    "        badgesStore.loadData(decodeResponse.data.badges, false);",
                    "        pointsStore.loadData(decodeResponse.data.points, false);",
                    "        levelsStore.loadData(decodeResponse.data.levels, false);",
                    "        statusesStore.loadData(decodeResponse.data.statuses, false);",
                    "        permissionsStore.loadData(decodeResponse.data.permissions, false);",
                    "        missionsStore.loadData(decodeResponse.data.missions, false);",
                    "        activityLogsStore.loadData(decodeResponse.data.activityLogs, false);",
                    "        rewardLogsStore.loadData(decodeResponse.data.rewardLogs, false);",
                    "",
                    "",
                    "",
                    "",
                    "        if(decodeResponse.data.badges.length === 0) {",
                    "            var badgesPart\t= me.lookupReference('badgesInfo');",
                    "            badgesPart.hide();",
                    "        }",
                    "",
                    "        if(decodeResponse.data.points.length === 0) {",
                    "            var pointsPart\t= me.lookupReference('pointsInfo');",
                    "            pointsPart.hide();",
                    "        }",
                    "",
                    "        if(decodeResponse.data.levels.length === 0) {",
                    "            var levelsPart\t= me.lookupReference('levelsInfo');",
                    "            levelsPart.hide();",
                    "        }",
                    "",
                    "        if(decodeResponse.data.statuses.length === 0) {",
                    "            var statusesPart\t= me.lookupReference('statusesInfo');",
                    "            statusesPart.hide();",
                    "        }",
                    "",
                    "        if(decodeResponse.data.permissions.length === 0) {",
                    "            var permissionsPart\t= me.lookupReference('permissionsInfo');",
                    "            permissionsPart.hide();",
                    "        }",
                    "",
                    "",
                    "        if(decodeResponse.data.missions.length === 0) {",
                    "            var missionsPart\t= me.lookupReference('missionsInfo');",
                    "            missionsPart.hide();",
                    "        }",
                    "",
                    "",
                    "",
                    "",
                    "    },",
                    "    failure: function(response){console.log(response);}",
                    "",
                    "});"
                ]
            },
            "name": "getStatisticsUser",
            "designerId": "76b15219-ab6a-4e12-936d-6b862b4ee417"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "period"
                ],
                "fn": "getStatisticsAllUsersByPeriod",
                "implHandler": [
                    "var me = this;",
                    "",
                    "var key = Ext.getStore('ManagerInfo').data.items[0].get('key');",
                    "var token = Ext.getStore('ManagerInfo').data.items[0].get('token');",
                    "",
                    "Ext.Ajax.request({",
                    "    url: '/api/v1/analyzer/usersbyperiod',",
                    "    method: 'GET',",
                    "    headers: {",
                    "        'x-key': key,",
                    "        'x-access-token': token",
                    "    },",
                    "    params:{",
                    "        period: period",
                    "    },",
                    "    success: function(response){",
                    "        var decodeResponse \t\t= Ext.decode(response.responseText);",
                    "",
                    "        var userAnalysisPeriodStore\t= me.getStore('userAnalysisPeriod');",
                    "        userAnalysisPeriodStore.loadData(decodeResponse.data, false);",
                    "",
                    "    },",
                    "    failure: function(response){console.log(response);}",
                    "",
                    "});"
                ]
            },
            "name": "getStatisticsAllUsersByPeriod",
            "designerId": "5270d634-5f25-4adb-826c-37c10bd74f18"
        }
    ]
}